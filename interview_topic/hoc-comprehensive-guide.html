<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Higher-Order Components (HOCs) Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .section:hover {
            transform: translateY(-5px);
        }
        
        .section h2 {
            color: #5a67d8;
            margin-bottom: 15px;
            border-bottom: 3px solid #e2e8f0;
            padding-bottom: 10px;
            font-size: 1.8rem;
        }
        
        .concept-visual {
            background: linear-gradient(135deg, #4299e1, #3182ce);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }
        
        .hoc-diagram {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .component-box {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            min-width: 150px;
            text-align: center;
            border: 2px solid rgba(255,255,255,0.3);
        }
        
        .arrow {
            font-size: 2rem;
            color: #ffd700;
            margin: 0 10px;
        }
        
        .code-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
        }
        
        .code-block h3 {
            color: #ffd700;
            margin-bottom: 15px;
            text-align: center;
            border-bottom: 2px solid #4a5568;
            padding-bottom: 10px;
        }
        
        pre {
            font-size: 14px;
            line-height: 1.4;
            white-space: pre-wrap;
        }
        
        .analogy-section {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .analogy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .analogy-card {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .analogy-card h4 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        
        .practical-examples {
            background: #f7fafc;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .example-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #5a67d8;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .pros-cons-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .pros {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
            padding: 20px;
            border-radius: 10px;
        }
        
        .cons {
            background: linear-gradient(135deg, #f56565, #e53e3e);
            color: white;
            padding: 20px;
            border-radius: 10px;
        }
        
        .interactive-demo {
            background: #edf2f7;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .demo-button {
            background: #5a67d8;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
            transition: all 0.3s ease;
        }
        
        .demo-button:hover {
            background: #4c51bf;
            transform: translateY(-2px);
        }
        
        .demo-output {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border: 2px solid #e2e8f0;
            min-height: 100px;
        }
        
        .highlight-box {
            background: #fef5e7;
            border: 2px solid #f6ad55;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .step-by-step {
            background: #e6fffa;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .step {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #38b2ac;
            display: flex;
            align-items: center;
        }
        
        .step-number {
            background: #38b2ac;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
        }
        
        .vs-section {
            background: linear-gradient(135deg, #805ad5, #6b46c1);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            color: #333;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .comparison-table th {
            background: #5a67d8;
            color: white;
            padding: 15px;
            text-align: left;
        }
        
        .comparison-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .comparison-table tr:nth-child(even) {
            background: #f7fafc;
        }
        
        @media (max-width: 768px) {
            .code-comparison, .pros-cons-grid {
                grid-template-columns: 1fr;
            }
            
            .hoc-diagram {
                flex-direction: column;
            }
            
            .arrow {
                transform: rotate(90deg);
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
        
        .fade-in {
            animation: fadeIn 0.8s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèóÔ∏è Higher-Order Components (HOCs)</h1>
            <p>Master the Art of Component Composition in React</p>
        </div>

        <div class="section fade-in">
            <h2>ü§î What is a Higher-Order Component?</h2>
            
            <div class="concept-visual">
                <h3>Simple Definition</h3>
                <p style="font-size: 1.3rem; margin: 20px 0;">
                    A Higher-Order Component is a <strong>function</strong> that takes a <strong>component</strong> and returns a <strong>new enhanced component</strong>
                </p>
                
                <div class="hoc-diagram">
                    <div class="component-box">
                        <h4>üì¶ Original Component</h4>
                        <p>Basic functionality</p>
                    </div>
                    <div class="arrow">‚û°Ô∏è</div>
                    <div class="component-box">
                        <h4>üîß HOC Function</h4>
                        <p>Adds extra features</p>
                    </div>
                    <div class="arrow">‚û°Ô∏è</div>
                    <div class="component-box">
                        <h4>‚ú® Enhanced Component</h4>
                        <p>Original + New features</p>
                    </div>
                </div>
                
                <p style="font-size: 1.4rem; margin-top: 20px;">
                    <code>HOC(Component) = EnhancedComponent</code>
                </p>
            </div>
        </div>

        <div class="section">
            <h2>üèóÔ∏è Real-World Analogy</h2>
            
            <div class="analogy-section">
                <h3>Think of HOCs like Decorators in Real Life</h3>
                
                <div class="analogy-grid">
                    <div class="analogy-card">
                        <h4>üè† House</h4>
                        <p>Basic house = Original Component</p>
                    </div>
                    <div class="analogy-card">
                        <h4>üîß Decorator</h4>
                        <p>Interior designer = HOC Function</p>
                    </div>
                    <div class="analogy-card">
                        <h4>‚ú® Decorated House</h4>
                        <p>Beautiful house = Enhanced Component</p>
                    </div>
                </div>
                
                <p style="text-align: center; font-size: 1.2rem; margin-top: 20px;">
                    The decorator doesn't change the house structure, but adds beautiful features to it!
                </p>
            </div>
        </div>

        <div class="section">
            <h2>üíª HOC with Class Components</h2>
            
            <div class="code-comparison">
                <div class="code-block">
                    <h3>üèõÔ∏è Class Component HOC</h3>
                    <pre><code>// HOC Function
const withAuth = (WrappedComponent) => {
  return class extends React.Component {
    constructor(props) {
      super(props);
      this.state = {
        isAuthenticated: false,
        loading: true
      };
    }

    componentDidMount() {
      // Check authentication
      this.checkAuth();
    }

    checkAuth = async () => {
      try {
        const token = localStorage.getItem('token');
        const isValid = await validateToken(token);
        this.setState({
          isAuthenticated: isValid,
          loading: false
        });
      } catch (error) {
        this.setState({
          isAuthenticated: false,
          loading: false
        });
      }
    }

    render() {
      const { isAuthenticated, loading } = this.state;
      
      if (loading) {
        return &lt;div&gt;Loading...&lt;/div&gt;;
      }
      
      if (!isAuthenticated) {
        return &lt;div&gt;Please login&lt;/div&gt;;
      }
      
      // Pass all props to wrapped component
      return &lt;WrappedComponent {...this.props} /&gt;;
    }
  };
};

// Original Component
class Dashboard extends React.Component {
  render() {
    return (
      &lt;div&gt;
        &lt;h1&gt;Welcome to Dashboard&lt;/h1&gt;
        &lt;p&gt;Secret content here!&lt;/p&gt;
      &lt;/div&gt;
    );
  }
}

// Enhanced Component
const ProtectedDashboard = withAuth(Dashboard);</code></pre>
                </div>
                
                <div class="code-block">
                    <h3>‚ö° Functional Component HOC</h3>
                    <pre><code>// HOC Function
const withAuth = (WrappedComponent) => {
  return (props) => {
    const [isAuthenticated, setIsAuthenticated] = useState(false);
    const [loading, setLoading] = useState(true);

    useEffect(() => {
      checkAuth();
    }, []);

    const checkAuth = async () => {
      try {
        const token = localStorage.getItem('token');
        const isValid = await validateToken(token);
        setIsAuthenticated(isValid);
      } catch (error) {
        setIsAuthenticated(false);
      } finally {
        setLoading(false);
      }
    };

    if (loading) {
      return &lt;div&gt;Loading...&lt;/div&gt;;
    }
    
    if (!isAuthenticated) {
      return &lt;div&gt;Please login&lt;/div&gt;;
    }
    
    // Pass all props to wrapped component
    return &lt;WrappedComponent {...props} /&gt;;
  };
};

// Original Component
const Dashboard = () => {
  return (
    &lt;div&gt;
      &lt;h1&gt;Welcome to Dashboard&lt;/h1&gt;
      &lt;p&gt;Secret content here!&lt;/p&gt;
    &lt;/div&gt;
  );
};

// Enhanced Component
const ProtectedDashboard = withAuth(Dashboard);</code></pre>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üéØ Common HOC Patterns</h2>
            
            <div class="practical-examples">
                <div class="example-card">
                    <h3>üîê Authentication HOC</h3>
                    <pre><code>const withAuth = (Component) => (props) => {
  const { user, loading } = useAuth();
  
  if (loading) return &lt;Spinner /&gt;;
  if (!user) return &lt;LoginForm /&gt;;
  
  return &lt;Component {...props} user={user} /&gt;;
};</code></pre>
                </div>
                
                <div class="example-card">
                    <h3>üìä Loading HOC</h3>
                    <pre><code>const withLoading = (Component) => (props) => {
  const [loading, setLoading] = useState(true);
  
  useEffect(() => {
    setTimeout(() => setLoading(false), 2000);
  }, []);
  
  if (loading) return &lt;div&gt;Loading...&lt;/div&gt;;
  
  return &lt;Component {...props} /&gt;;
};</code></pre>
                </div>
                
                <div class="example-card">
                    <h3>üìù Form Validation HOC</h3>
                    <pre><code>const withValidation = (Component, validationRules) => (props) => {
  const [errors, setErrors] = useState({});
  
  const validate = (values) => {
    const newErrors = {};
    validationRules.forEach(rule => {
      if (!rule.validator(values[rule.field])) {
        newErrors[rule.field] = rule.message;
      }
    });
    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };
  
  return &lt;Component {...props} errors={errors} validate={validate} /&gt;;
};</code></pre>
                </div>
                
                <div class="example-card">
                    <h3>üé® Theme HOC</h3>
                    <pre><code>const withTheme = (Component) => (props) => {
  const [theme, setTheme] = useState('light');
  
  const toggleTheme = () => {
    setTheme(prev => prev === 'light' ? 'dark' : 'light');
  };
  
  return (
    &lt;div className={`theme-${theme}`}&gt;
      &lt;Component 
        {...props} 
        theme={theme} 
        toggleTheme={toggleTheme} 
      /&gt;
    &lt;/div&gt;
  );
};</code></pre>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üîÑ HOCs vs Custom Hooks</h2>
            
            <div class="vs-section">
                <h3>Modern Alternative: Custom Hooks</h3>
                
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Aspect</th>
                            <th>HOCs</th>
                            <th>Custom Hooks</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Component Wrapping</strong></td>
                            <td>Creates wrapper components</td>
                            <td>Direct logic sharing</td>
                        </tr>
                        <tr>
                            <td><strong>Props Passing</strong></td>
                            <td>Must forward props manually</td>
                            <td>No prop forwarding needed</td>
                        </tr>
                        <tr>
                            <td><strong>Component Tree</strong></td>
                            <td>Adds extra layers</td>
                            <td>No extra components</td>
                        </tr>
                        <tr>
                            <td><strong>Debugging</strong></td>
                            <td>Harder to debug</td>
                            <td>Easier to debug</td>
                        </tr>
                        <tr>
                            <td><strong>Performance</strong></td>
                            <td>Slight overhead</td>
                            <td>Better performance</td>
                        </tr>
                        <tr>
                            <td><strong>Reusability</strong></td>
                            <td>Good</td>
                            <td>Excellent</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="code-comparison">
                <div class="code-block">
                    <h3>üèõÔ∏è HOC Approach</h3>
                    <pre><code>// HOC
const withCounter = (Component) => (props) => {
  const [count, setCount] = useState(0);
  
  return (
    &lt;Component 
      {...props} 
      count={count} 
      increment={() => setCount(c => c + 1)}
    /&gt;
  );
};

// Usage
const Counter = ({ count, increment }) => (
  &lt;div&gt;
    &lt;p&gt;Count: {count}&lt;/p&gt;
    &lt;button onClick={increment}&gt;+&lt;/button&gt;
  &lt;/div&gt;
);

const EnhancedCounter = withCounter(Counter);</code></pre>
                </div>
                
                <div class="code-block">
                    <h3>ü™ù Custom Hook Approach</h3>
                    <pre><code>// Custom Hook
const useCounter = (initialValue = 0) => {
  const [count, setCount] = useState(initialValue);
  
  const increment = () => setCount(c => c + 1);
  const decrement = () => setCount(c => c - 1);
  const reset = () => setCount(initialValue);
  
  return { count, increment, decrement, reset };
};

// Usage
const Counter = () => {
  const { count, increment } = useCounter(0);
  
  return (
    &lt;div&gt;
      &lt;p&gt;Count: {count}&lt;/p&gt;
      &lt;button onClick={increment}&gt;+&lt;/button&gt;
    &lt;/div&gt;
  );
};</code></pre>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>‚úÖ Pros and Cons</h2>
            
            <div class="pros-cons-grid">
                <div class="pros">
                    <h3>‚úÖ HOC Advantages</h3>
                    <ul>
                        <li>Reusable logic across components</li>
                        <li>Separation of concerns</li>
                        <li>Works with both class and functional components</li>
                        <li>Can provide additional props</li>
                        <li>Good for cross-cutting concerns</li>
                        <li>Composable (can stack multiple HOCs)</li>
                    </ul>
                </div>
                
                <div class="cons">
                    <h3>‚ùå HOC Disadvantages</h3>
                    <ul>
                        <li>Wrapper hell (too many nested components)</li>
                        <li>Props collision issues</li>
                        <li>Difficult debugging</li>
                        <li>Static composition (decided at compile time)</li>
                        <li>Ref forwarding complexity</li>
                        <li>Less performant than hooks</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üé™ Interactive Demo</h2>
            
            <div class="interactive-demo">
                <h3>Try HOC vs Custom Hook</h3>
                <p>Click buttons to see different implementations:</p>
                
                <button class="demo-button" onclick="showHOCExample()">Show HOC Example</button>
                <button class="demo-button" onclick="showHookExample()">Show Custom Hook Example</button>
                <button class="demo-button" onclick="clearDemo()">Clear</button>
                
                <div class="demo-output" id="demoOutput">
                    <p>Click a button above to see examples!</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üìö How to Explain HOCs to Others</h2>
            
            <div class="step-by-step">
                <h3>Step-by-Step Explanation Strategy</h3>
                
                <div class="step">
                    <div class="step-number">1</div>
                    <div>
                        <strong>Start with the Analogy:</strong> "Think of HOCs like decorators or wrappers in real life - they add functionality without changing the core item."
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-number">2</div>
                    <div>
                        <strong>Show the Pattern:</strong> "A HOC is just a function that takes a component and returns a new component with extra features."
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-number">3</div>
                    <div>
                        <strong>Live Coding:</strong> Start with a simple component, then show how to wrap it with an HOC for authentication.
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-number">4</div>
                    <div>
                        <strong>Visual Diagram:</strong> Draw the flow: Component ‚Üí HOC ‚Üí Enhanced Component
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-number">5</div>
                    <div>
                        <strong>Compare with Alternatives:</strong> Show the same functionality using custom hooks to highlight differences.
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-number">6</div>
                    <div>
                        <strong>Practical Exercise:</strong> Have them create their own simple HOC (like withLoading or withErrorBoundary).
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üö® Common Pitfalls and Best Practices</h2>
            
            <div class="highlight-box">
                <h3>‚ö†Ô∏è Common Mistakes</h3>
                <ul>
                    <li><strong>Don't mutate the original component</strong> - Always return a new component</li>
                    <li><strong>Forward refs properly</strong> - Use React.forwardRef when needed</li>
                    <li><strong>Don't use HOCs inside render</strong> - Create them outside component definitions</li>
                    <li><strong>Copy static methods</strong> - Use hoist-non-react-statics library</li>
                </ul>
            </div>
            
            <div class="highlight-box">
                <h3>‚úÖ Best Practices</h3>
                <ul>
                    <li><strong>Use descriptive names</strong> - withAuth, withLoading, etc.</li>
                    <li><strong>Pass props through</strong> - Always spread {...props}</li>
                    <li><strong>Consider custom hooks</strong> - They're often a better choice</li>
                    <li><strong>Document your HOCs</strong> - Explain what props they add/expect</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>üéØ When to Use HOCs</h2>
            
            <div class="highlight-box">
                <h3>‚úÖ Good Use Cases</h3>
                <ul>
                    <li>Authentication/Authorization logic</li>
                    <li>Loading states</li>
                    <li>Error boundaries</li>
                    <li>Theme providers</li>
                    <li>Analytics tracking</li>
                    <li>Legacy codebase with class components</li>
                </ul>
            </div>
            
            <div class="highlight-box">
                <h3>‚ùå When to Avoid HOCs</h3>
                <ul>
                    <li>Simple state logic (use custom hooks instead)</li>
                    <li>When you need dynamic composition</li>
                    <li>If you're already using too many HOCs (wrapper hell)</li>
                    <li>For new projects (prefer hooks)</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        function showHOCExample() {
            const output = document.getElementById('demoOutput');
            output.innerHTML = `
                <h4>üèõÔ∏è HOC Example</h4>
                <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 8px; margin-top: 10px;"><code>// HOC that adds loading functionality
const withLoading = (Component) => (props) => {
  const [loading, setLoading] = useState(true);
  
  useEffect(() => {
    setTimeout(() => setLoading(false), 2000);
  }, []);
  
  if (loading) return <div>Loading...</div>;
  
  return <Component {...props} />;
};

// Usage
const Dashboard = () => <div>Dashboard Content</div>;
const LoadingDashboard = withLoading(Dashboard);</code></pre>
                <p><strong>Result:</strong> Dashboard component now shows loading spinner for 2 seconds!</p>
            `;
        }

        function showHookExample() {
            const output = document.getElementById('demoOutput');
            output.innerHTML = `
                <h4>ü™ù Custom Hook Alternative</h4>
                <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 8px; margin-top: 10px;"><code>// Custom hook with same functionality
const useLoading = (delay = 2000) => {
  const [loading, setLoading] = useState(true);
  
  useEffect(() => {
    setTimeout(() => setLoading(false), delay);
  }, [delay]);
  
  return loading;
};

// Usage
const Dashboard = () => {
  const loading = useLoading(2000);
  
  if (loading) return <div>Loading...</div>;
  
  return <div>Dashboard Content</div>;
};</code></pre>
                <p><strong>Result:</strong> Same functionality but cleaner, no wrapper components!</p>
            `;
        }

        function clearDemo() {
            const output = document.getElementById('demoOutput');
            output.innerHTML = '<p>Click a button above to see examples!</p>';
        }

        // Add fade-in animation to sections as they come into view
        const observer = new IntersectionObserver((entries) => 
        {
            entries.forEach(entry);
        })